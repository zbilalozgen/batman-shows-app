(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{139:function(e,t){},14:function(e,t,a){e.exports=a.p+"static/media/batarang.ae7fc5d0.svg"},157:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),i=(a(76),a(77),a(78),a(14)),s=a.n(i);var l=function(){return r.a.createElement("img",{className:"logo",src:s.a,alt:"logo-bat"})},m=a(15);var u=function(e){var t=e.movie,a=t.name,n=t.rating,o=t.premiered,c=t.id,i=t.image,s=t.genres;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{className:"movie-card__link ",to:"/moviedetail/".concat(c)},r.a.createElement("div",{className:"movie-card container__col-4"},r.a.createElement("img",{src:i.medium,alt:a}),r.a.createElement("div",{className:"movie-card__container"},r.a.createElement("h1",{className:"movie-card_title"},a),r.a.createElement("h3",null,n.average?"Rating: ".concat(n.average):"Waiting for reviews!"),r.a.createElement("h4",null,"Premier date: ",o),s.map((function(e){return r.a.createElement("span",{className:"movie-card__subtitle"},"".concat(e))}))))))},d=a(17),v=a(24),p=a(25),E=a(28),f=a(26),g=a(29),_="LOADING",h="FETCH_ERROR",b="SORT_TYPE",w=a(36),O=a.n(w);function N(){return{type:_}}function T(e){return{type:h,error:e}}var y=a(10),D=a(27),j=a.n(D),k=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).scrollHandle=function(){window.onscroll=function(){window.innerHeight+window.scrollY>=document.body.scrollHeight-1&&a.setState({index:a.state.index+4},console.log(a.state.movies))}},a.sortMovies=function(e,t){return""===t?e:"ascending"===t?Object(d.a)(e).sort((function(e,t){return new Date(t.show.premiered)-new Date(e.show.premiered)})):"descending"===t?Object(d.a)(e).sort((function(e,t){return new Date(e.show.premiered)-new Date(t.show.premiered)})):void 0},a.state={index:6},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.getData(),window.addEventListener("scroll",this.scrollHandle)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollHandle)}},{key:"render",value:function(){var e=this.sortMovies(this.props.movies,this.props.sort).slice(0,this.state.index).map((function(e){return r.a.createElement(u,{key:e.show.id,movie:e.show})})),t=r.a.createElement(j.a,{loading:!0,bgColor:"#f1f1f1",spinnerColor:"#9ee5f8",textColor:"#676767",logoSrc:s.a,text:"Your Batman Movie's on its way  "},r.a.createElement("div",null,"Loadable content")),a=r.a.createElement("div",null,this.props.error);return this.props.loading?t:this.props.error?a:e}}]),t}(n.Component),x=Object(y.b)((function(e){return{movies:e.movies,loading:e.loading,error:e.error,sort:e.sort}}),(function(e){return{getData:function(t){e((function(e){e(N()),O.a.get("http://api.tvmaze.com/search/shows?q=batman").then((function(t){var a=t.data;setTimeout((function(){e({type:"GET_DATA",movies:a})}),20)})).catch((function(t){e(T(t.message))}))}))}}}))(k),C=a(20),R=a.n(C);var S=Object(y.b)((function(e){return{sort:e.sort}}),(function(e){return{sortType:function(t){e(function(e){return{type:b,sortType:e}}(t))}}}))((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sidebar"},r.a.createElement("h4",{className:"sidebar__title"},"SORT BY PREMIERED DATE"),r.a.createElement("p",{className:R()({sidebar__item:!0,sidebar__item__active:"descending"===e.sort}),onClick:function(){e.sortType("descending")}},"OLDEST TO NEWEST"),r.a.createElement("p",{className:R()({sidebar__item:!0,sidebar__item__active:"ascending"===e.sort}),onClick:function(){e.sortType("ascending")}},"NEWEST TO OLDEST"," "),r.a.createElement("p",{className:R()({sidebar__item:!0,sidebar__item__active:""===e.sort}),onClick:function(){e.sortType("")}},"REMOVE SORT")))})),A=a(6),L=a(69),M=a.n(L);var W=function(e){var t=e.movieDetail,a=t.name,n=t.summary,o=t.image,c=t.rating,i=t.genres,s=t.type,l=t.premiered;console.log(e);var m=M()(n);return r.a.createElement("section",{className:"card-container"},r.a.createElement("article",{className:"c-card c-card--wide"},r.a.createElement("header",{className:"c-card__header"},r.a.createElement("img",{src:o.medium,className:"c-card__image",alt:" "})),r.a.createElement("div",{className:"c-card__body"},r.a.createElement("h1",{className:"c-card__title"},a),i.map((function(e){return r.a.createElement("span",{className:"c-card__subtitle"},"".concat(e))})),r.a.createElement("p",{className:"c-card__intro"},m)),r.a.createElement("footer",{className:"c-card__footer"},r.a.createElement("span",{className:"c-card__subtitle"},s),r.a.createElement("span",{className:"c-card__subtitle"},c.average?"Rating: ".concat(c.average):"Waiting for reviews!"),r.a.createElement("span",{className:"c-card__subtitle"},l))))},H=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.getDetail(this.props.match.params.id)}},{key:"render",value:function(){var e=r.a.createElement(j.a,{loading:!0,bgColor:"#f1f1f1",spinnerColor:"#9ee5f8",textColor:"#676767",logoSrc:s.a,text:"Your Batman Movie's on its way  "}),t=r.a.createElement("div",null,this.props.error);return this.props.loading?e:this.props.error?t:r.a.createElement(W,{movieDetail:this.props.movieDetail})}}]),t}(r.a.Component),B=Object(y.b)((function(e){return{movieDetail:e.movieDetail,loading:e.loading,error:e.error}}),(function(e){return{getDetail:function(t){e(function(e){return function(t){t(N()),O.a.get("http://api.tvmaze.com/shows/".concat(e)).then((function(e){var a=e.data;setTimeout((function(){t({type:"GET_DETAIL",movieDetail:a})}),20)})).catch((function(e){t(T(e.message))}))}}(t))}}}))(H);var F=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container__fluid"},r.a.createElement("div",{className:"container__row"},r.a.createElement("div",{className:"container__col-3"},r.a.createElement(S,null)),r.a.createElement("div",{className:"container__col-9"},r.a.createElement("div",{className:"container__row"},r.a.createElement(x,null))))))};var G=function(){return r.a.createElement("div",null,r.a.createElement(A.c,null,r.a.createElement(A.a,{exact:!0,path:"/",component:F}),r.a.createElement(A.a,{path:"/moviedetail/:id",component:B})))};var I=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{to:"/"},r.a.createElement(l,{className:"logo"})),r.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=a(16),P=a(70),z=a(18),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{movies:[],loading:!1,error:null,movieDetail:{image:{},genres:[],rating:{}},sort:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATA":return Object(z.a)({},e,{movies:Object(d.a)(t.movies),_movies:Object(d.a)(t.movies),loading:!1,error:null});case _:return Object(z.a)({},e,{loading:!0});case h:return Object(z.a)({},e,{loading:!1,error:t.error});case"GET_DETAIL":return Object(z.a)({},e,{movieDetail:t.movieDetail,loading:!1,error:null});case b:return Object(z.a)({},e,{sort:t.sortType});default:return e}},q=Object(Y.d)(J,Object(Y.c)(Object(Y.a)(P.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));c.a.render(r.a.createElement((function(){return r.a.createElement(y.a,{store:q},r.a.createElement(m.a,null,r.a.createElement(I,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t,a){e.exports=a(157)},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.72899a87.chunk.js.map