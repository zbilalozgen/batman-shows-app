(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/batarang.ae7fc5d0.svg"},140:function(e,t){},158:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),i=(a(77),a(78),a(79),a(14)),s=a.n(i);var l=function(){return r.a.createElement("img",{className:"logo",src:s.a,alt:"logo-bat"})},m=a(65),u=a.n(m),d=a(16);var v=function(e){var t=e.movie,a=t.name,n=t.rating,o=t.premiered,c=t.id,i=t.image,s=t.genres,l=r.a.createElement("span",{id:"null-review"},"Waiting for reviews!");return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{className:"movie-card__link ",to:"/moviedetail/".concat(c)},r.a.createElement("div",{className:"movie-card container__col-4"},r.a.createElement("img",{src:i.medium,alt:a}),r.a.createElement("div",{className:"movie-card__container"},r.a.createElement("h1",{className:"movie-card_title"},a),r.a.createElement("h3",null,n.average?r.a.createElement(u.a,{name:"rate2",editing:!1,starCount:10,value:n.average}):l),r.a.createElement("h4",null,"Premier date: ",o),s.map((function(e){return r.a.createElement("span",{className:"movie-card__subtitle"},"".concat(e))}))))))},p=a(18),E=a(24),f=a(25),g=a(28),_=a(26),h=a(29),b="LOADING",w="FETCH_ERROR",O="SORT_TYPE",N=a(36),T=a.n(N);function y(){return{type:b}}function D(e){return{type:w,error:e}}var j=a(10),k=a(27),x=a.n(k),C=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(g.a)(this,Object(_.a)(t).call(this,e))).scrollHandle=function(){window.onscroll=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight-10&&a.setState({index:a.state.index+3},console.log(a.state.movies))}},a.sortMovies=function(e,t){return""===t?e:"ascending"===t?Object(p.a)(e).sort((function(e,t){return new Date(t.show.premiered)-new Date(e.show.premiered)})):"descending"===t?Object(p.a)(e).sort((function(e,t){return new Date(e.show.premiered)-new Date(t.show.premiered)})):void 0},a.state={index:6},a}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.getData(),window.addEventListener("scroll",this.scrollHandle)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollHandle)}},{key:"render",value:function(){var e=this.sortMovies(this.props.movies,this.props.sort).slice(0,this.state.index).map((function(e){return r.a.createElement(v,{key:e.show.id,movie:e.show})})),t=r.a.createElement(x.a,{loading:!0,bgColor:"#f1f1f1",spinnerColor:"#9ee5f8",textColor:"#676767",logoSrc:s.a,text:"Your Batman Movie's on its way  "},r.a.createElement("div",null,"Loadable content")),a=r.a.createElement("div",null,this.props.error);return this.props.loading?t:this.props.error?a:e}}]),t}(n.Component),S=Object(j.b)((function(e){return{movies:e.movies,loading:e.loading,error:e.error,sort:e.sort}}),(function(e){return{getData:function(t){e((function(e){e(y()),T.a.get("https://api.tvmaze.com/search/shows?q=batman").then((function(t){var a=t.data;setTimeout((function(){e({type:"GET_DATA",movies:a})}),20)})).catch((function(t){e(D(t.message))}))}))}}}))(C),R=a(15),A=a.n(R);var L=Object(j.b)((function(e){return{sort:e.sort}}),(function(e){return{sortType:function(t){e(function(e){return{type:O,sortType:e}}(t))}}}))((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sidebar"},r.a.createElement("h4",{className:"sidebar__title"},"SORT BY PREMIERED DATE"),r.a.createElement("p",{className:A()({sidebar__item:!0,sidebar__item__active:"descending"===e.sort}),onClick:function(){e.sortType("descending")}},"OLDEST TO NEWEST"),r.a.createElement("p",{className:A()({sidebar__item:!0,sidebar__item__active:"ascending"===e.sort}),onClick:function(){e.sortType("ascending")}},"NEWEST TO OLDEST"," "),r.a.createElement("p",{className:A()({sidebar__item:!0,sidebar__item__active:""===e.sort}),onClick:function(){e.sortType("")}},"NO SORT")))})),M=a(6),W=a(70),H=a.n(W);var B=function(e){var t=e.movieDetail,a=t.name,n=t.summary,o=t.image,c=t.rating,i=t.genres,s=t.type,l=t.premiered;console.log(e);var m=H()(n);return r.a.createElement("section",{className:"card-container"},r.a.createElement("article",{className:"c-card c-card--wide"},r.a.createElement("header",{className:"c-card__header"},r.a.createElement("img",{src:o.medium,className:"c-card__image",alt:" "})),r.a.createElement("div",{className:"c-card__body"},r.a.createElement("h1",{className:"c-card__title"},a),i.map((function(e){return r.a.createElement("span",{className:"c-card__subtitle"},"".concat(e))})),r.a.createElement("p",{className:"c-card__intro"},m)),r.a.createElement("footer",{className:"c-card__footer"},r.a.createElement("span",{className:"c-card__subtitle"},s),r.a.createElement("span",{className:"c-card__subtitle"},c.average?"Rating: ".concat(c.average):"Waiting for reviews!"),r.a.createElement("span",{className:"c-card__subtitle"},l))))},F=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(g.a)(this,Object(_.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.getDetail(this.props.match.params.id)}},{key:"render",value:function(){var e=r.a.createElement(x.a,{loading:!0,bgColor:"#f1f1f1",spinnerColor:"#9ee5f8",textColor:"#676767",logoSrc:s.a,text:"Your Batman Movie's on its way  "}),t=r.a.createElement("div",null,this.props.error);return this.props.loading?e:this.props.error?t:r.a.createElement(B,{movieDetail:this.props.movieDetail})}}]),t}(r.a.Component),G=Object(j.b)((function(e){return{movieDetail:e.movieDetail,loading:e.loading,error:e.error}}),(function(e){return{getDetail:function(t){e(function(e){return function(t){t(y()),T.a.get("https://api.tvmaze.com/shows/".concat(e)).then((function(e){var a=e.data;setTimeout((function(){t({type:"GET_DETAIL",movieDetail:a})}),20)})).catch((function(e){t(D(e.message))}))}}(t))}}}))(F);var I=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container__fluid"},r.a.createElement("div",{className:"container__row"},r.a.createElement("div",{className:"container__col-3"},r.a.createElement(L,null)),r.a.createElement("div",{className:"container__col-9"},r.a.createElement("div",{className:"container__row"},r.a.createElement(S,null))))))};var Y=function(){return r.a.createElement("div",null,r.a.createElement(M.c,null,r.a.createElement(M.a,{exact:!0,path:"/",component:I}),r.a.createElement(M.a,{path:"/moviedetail/:id",component:G})))};var P=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{to:"/"},r.a.createElement(l,{className:"logo"})),r.a.createElement(Y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(17),J=a(71),q=a(19),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{movies:[],loading:!1,error:null,movieDetail:{image:{},genres:[],rating:{}},sort:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATA":return Object(q.a)({},e,{movies:Object(p.a)(t.movies),_movies:Object(p.a)(t.movies),loading:!1,error:null});case b:return Object(q.a)({},e,{loading:!0});case w:return Object(q.a)({},e,{loading:!1,error:t.error});case"GET_DETAIL":return Object(q.a)({},e,{movieDetail:t.movieDetail,loading:!1,error:null});case O:return Object(q.a)({},e,{sort:t.sortType});default:return e}},$=Object(z.d)(U,Object(z.c)(Object(z.a)(J.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));c.a.render(r.a.createElement((function(){return r.a.createElement(j.a,{store:$},r.a.createElement(d.a,null,r.a.createElement(P,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,a){e.exports=a(158)},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.6d880041.chunk.js.map